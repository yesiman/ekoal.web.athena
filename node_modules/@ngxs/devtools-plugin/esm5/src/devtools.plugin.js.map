{
  "version": 3,
  "file": "devtools.plugin.js",
  "sources": [
    "ng://@ngxs/devtools-plugin/packages/devtools-plugin/src/devtools.plugin.ts"
  ],
  "sourcesContent": [
    "import { Injectable, Inject, Injector } from '@angular/core';\nimport { NgxsPlugin, getActionTypeFromInstance, Store } from '@ngxs/store';\nimport { tap } from 'rxjs/operators';\n\nimport { NgxsDevtoolsExtension, NgxsDevtoolsOptions, NGXS_DEVTOOLS_OPTIONS, NgxsDevtoolsAction } from './symbols';\n\n/**\n * Adds support for the Redux Devtools extension:\n * http://extension.remotedev.io/\n */\n@Injectable()\nexport class NgxsReduxDevtoolsPlugin implements NgxsPlugin {\n  private readonly devtoolsExtension: NgxsDevtoolsExtension | null = null;\n  private readonly windowObj: any = typeof window !== 'undefined' ? window : {};\n\n  constructor(@Inject(NGXS_DEVTOOLS_OPTIONS) private _options: NgxsDevtoolsOptions, private _injector: Injector) {\n    const globalDevtools = this.windowObj['__REDUX_DEVTOOLS_EXTENSION__'] || this.windowObj['devToolsExtension'];\n    if (globalDevtools) {\n      this.devtoolsExtension = globalDevtools.connect(_options) as NgxsDevtoolsExtension;\n      this.devtoolsExtension.subscribe(a => this.dispatched(a));\n    }\n  }\n\n  /**\n   * Middleware handle function\n   */\n  handle(state: any, action: any, next: any) {\n    const isDisabled = this._options && this._options.disabled;\n    if (!this.devtoolsExtension || isDisabled) {\n      return next(state, action);\n    }\n\n    return next(state, action).pipe(\n      tap(newState => {\n        // if init action, send initial state to dev tools\n        const isInitAction = getActionTypeFromInstance(action) === '@@INIT';\n        if (isInitAction) {\n          this.devtoolsExtension.init(state);\n        } else {\n          const type = getActionTypeFromInstance(action);\n\n          this.devtoolsExtension.send({ ...action, type }, newState);\n        }\n      })\n    );\n  }\n\n  /**\n   * Handle the action from the dev tools subscription\n   */\n  dispatched(action: NgxsDevtoolsAction) {\n    if (action.type === 'DISPATCH') {\n      if (action.payload.type === 'JUMP_TO_ACTION' || action.payload.type === 'JUMP_TO_STATE') {\n        const prevState = JSON.parse(action.state);\n        // Lazy get the store for circular depedency issues\n        const store = this._injector.get(Store);\n        store.reset(prevState);\n      } else if (action.payload.type === 'TOGGLE_ACTION') {\n        console.warn('Skip is not supported at this time.');\n      }\n    } else if (action.type === 'ACTION') {\n      // Lazy get the store for circular depedency issues\n      const store = this._injector.get(Store);\n      const actionPayload = JSON.parse(action.payload);\n      store.dispatch(actionPayload);\n    }\n  }\n}\n"
  ],
  "names": [],
  "mappings": "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"
}
