{
  "version": 3,
  "file": "logger.plugin.js",
  "sources": [
    "ng://@ngxs/logger-plugin/packages/logger-plugin/src/logger.plugin.ts"
  ],
  "sourcesContent": [
    "import { Injectable, Inject } from '@angular/core';\nimport { NgxsPlugin, getActionTypeFromInstance } from '@ngxs/store';\n\nimport { NGXS_LOGGER_PLUGIN_OPTIONS, NgxsLoggerPluginOptions } from './symbols';\nimport { pad } from './internals';\nimport { tap } from 'rxjs/operators';\n\n@Injectable()\nexport class NgxsLoggerPlugin implements NgxsPlugin {\n  constructor(@Inject(NGXS_LOGGER_PLUGIN_OPTIONS) private _options: NgxsLoggerPluginOptions) {}\n\n  handle(state, event, next) {\n    if (this._options.disabled) {\n      return next(state, event);\n    }\n\n    const options = this._options || <any>{};\n    const logger = options.logger || console;\n    const actionName = getActionTypeFromInstance(event);\n    const time = new Date();\n\n    // tslint:disable-next-line\n    const formattedTime = ` @ ${pad(time.getHours(), 2)}:${pad(time.getMinutes(), 2)}:${pad(\n      time.getSeconds(),\n      2\n    )}.${pad(time.getMilliseconds(), 3)}`;\n\n    const message = `action ${actionName}${formattedTime}`;\n    const startMessage = options.collapsed ? logger.groupCollapsed : logger.group;\n\n    try {\n      startMessage.call(logger, message);\n    } catch (e) {\n      console.log(message);\n    }\n\n    if (typeof event.payload !== 'undefined') {\n      this.log('payload', 'color: #9E9E9E; font-weight: bold', event.payload);\n    }\n\n    this.log('prev state', 'color: #9E9E9E; font-weight: bold', state);\n\n    return next(state, event).pipe(\n      tap(nextState => {\n        this.log('next state', 'color: #4CAF50; font-weight: bold', nextState);\n        try {\n          logger.groupEnd();\n        } catch (e) {\n          logger.log('—— log end ——');\n        }\n      })\n    );\n  }\n\n  log(title: string, color: string, payload: any) {\n    const options = this._options || <any>{};\n    const logger = options.logger || console;\n\n    if (this.isIE()) {\n      logger.log(title, payload);\n    } else {\n      logger.log('%c ' + title, color, payload);\n    }\n  }\n\n  isIE(): boolean {\n    const ua = typeof window !== 'undefined' && window.navigator.userAgent ? window.navigator.userAgent : '';\n    let ms_ie = false;\n\n    const old_ie = ua.indexOf('MSIE ');\n    const new_ie = ua.indexOf('Trident/');\n\n    if (old_ie > -1 || new_ie > -1) {\n      ms_ie = true;\n    }\n\n    return ms_ie;\n  }\n}\n"
  ],
  "names": [],
  "mappings": "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"
}
