{
  "version": 3,
  "file": "ngxs-logger-plugin.js",
  "sources": [
    "ng://@ngxs/logger-plugin/packages/logger-plugin/src/logger.module.ts",
    "ng://@ngxs/logger-plugin/packages/logger-plugin/src/logger.plugin.ts",
    "ng://@ngxs/logger-plugin/packages/logger-plugin/src/internals.ts",
    "ng://@ngxs/logger-plugin/packages/logger-plugin/src/symbols.ts"
  ],
  "sourcesContent": [
    "import { NgModule, ModuleWithProviders, InjectionToken } from '@angular/core';\nimport { NGXS_PLUGINS } from '@ngxs/store';\nimport { NgxsLoggerPluginOptions, NGXS_LOGGER_PLUGIN_OPTIONS } from './symbols';\nimport { NgxsLoggerPlugin } from './logger.plugin';\n\nexport const USER_OPTIONS = new InjectionToken('LOGGER_USER_OPTIONS');\n\nexport function loggerOptionsFactory(options: NgxsLoggerPluginOptions) {\n  const defaultLoggerOptions: NgxsLoggerPluginOptions = {\n    logger: console,\n    collapsed: false,\n    disabled: false\n  };\n\n  return {\n    ...defaultLoggerOptions,\n    ...options\n  };\n}\n\n@NgModule()\nexport class NgxsLoggerPluginModule {\n  static forRoot(options?: NgxsLoggerPluginOptions): ModuleWithProviders {\n    return {\n      ngModule: NgxsLoggerPluginModule,\n      providers: [\n        {\n          provide: NGXS_PLUGINS,\n          useClass: NgxsLoggerPlugin,\n          multi: true\n        },\n        {\n          provide: USER_OPTIONS,\n          useValue: options\n        },\n        {\n          provide: NGXS_LOGGER_PLUGIN_OPTIONS,\n          useFactory: loggerOptionsFactory,\n          deps: [USER_OPTIONS]\n        }\n      ]\n    };\n  }\n}\n",
    "import { Injectable, Inject } from '@angular/core';\nimport { NgxsPlugin, getActionTypeFromInstance } from '@ngxs/store';\n\nimport { NGXS_LOGGER_PLUGIN_OPTIONS, NgxsLoggerPluginOptions } from './symbols';\nimport { pad } from './internals';\nimport { tap } from 'rxjs/operators';\n\n@Injectable()\nexport class NgxsLoggerPlugin implements NgxsPlugin {\n  constructor(@Inject(NGXS_LOGGER_PLUGIN_OPTIONS) private _options: NgxsLoggerPluginOptions) {}\n\n  handle(state, event, next) {\n    if (this._options.disabled) {\n      return next(state, event);\n    }\n\n    const options = this._options || <any>{};\n    const logger = options.logger || console;\n    const actionName = getActionTypeFromInstance(event);\n    const time = new Date();\n\n    // tslint:disable-next-line\n    const formattedTime = ` @ ${pad(time.getHours(), 2)}:${pad(time.getMinutes(), 2)}:${pad(\n      time.getSeconds(),\n      2\n    )}.${pad(time.getMilliseconds(), 3)}`;\n\n    const message = `action ${actionName}${formattedTime}`;\n    const startMessage = options.collapsed ? logger.groupCollapsed : logger.group;\n\n    try {\n      startMessage.call(logger, message);\n    } catch (e) {\n      console.log(message);\n    }\n\n    if (typeof event.payload !== 'undefined') {\n      this.log('payload', 'color: #9E9E9E; font-weight: bold', event.payload);\n    }\n\n    this.log('prev state', 'color: #9E9E9E; font-weight: bold', state);\n\n    return next(state, event).pipe(\n      tap(nextState => {\n        this.log('next state', 'color: #4CAF50; font-weight: bold', nextState);\n        try {\n          logger.groupEnd();\n        } catch (e) {\n          logger.log('—— log end ——');\n        }\n      })\n    );\n  }\n\n  log(title: string, color: string, payload: any) {\n    const options = this._options || <any>{};\n    const logger = options.logger || console;\n\n    if (this.isIE()) {\n      logger.log(title, payload);\n    } else {\n      logger.log('%c ' + title, color, payload);\n    }\n  }\n\n  isIE(): boolean {\n    const ua = typeof window !== 'undefined' && window.navigator.userAgent ? window.navigator.userAgent : '';\n    let ms_ie = false;\n\n    const old_ie = ua.indexOf('MSIE ');\n    const new_ie = ua.indexOf('Trident/');\n\n    if (old_ie > -1 || new_ie > -1) {\n      ms_ie = true;\n    }\n\n    return ms_ie;\n  }\n}\n",
    "export const repeat = (str, times) => new Array(times + 1).join(str);\nexport const pad = (num, maxLength) => repeat('0', maxLength - num.toString().length) + num;\n",
    "import { InjectionToken } from '@angular/core';\n\nexport interface NgxsLoggerPluginOptions {\n  /** Auto expand logged actions  */\n  collapsed?: boolean;\n\n  /** Provide alternate console.log implementation */\n  logger?: any;\n\n  /** Disable the logger. Useful for prod mode. */\n  disabled?: boolean;\n}\n\nexport const NGXS_LOGGER_PLUGIN_OPTIONS = new InjectionToken('NGXS_LOGGER_PLUGIN_OPTIONS');\n"
  ],
  "names": [],
  "mappings": ";;;;AGaA,IAAA,0BAAA,GAAA,IAAA,cAAA,CAAA,4BAAA,CAAA;;ADbO,IAAP,MAAA,GAAA,UAAA,GAAiC,EAAE,KAAnC,EAA0C,EAA1C,OAAA,IAAA,KAAA,CAAA,KAAA,GAAqE,CAArE,CAAA,CAAA,IAAA,CAAA,GAAA,CAAA,CAAA,EAAA,CAAA;AACA,AAAO,IAAP,GAAA,GAAA,UAAA,GAAA,EAAA,SAAA,EAAA,EAA6C,OAA7C,MAAA,CAAA,GAAA,EAAA,SAAA,GAAA,GAAA,CAAA,QAAwF,EAAxF,CAA2F,MAA3F,CAAA,GAAA,GAAA,CAAA,EAAA,CAAA;;ADOA,IAAA,gBAAA,kBAAA,YAAA;IACE,SAAF,gBAAA,CAAA,QAAA,EAAA;QAA0D,IAA1D,CAAA,QAAkE,GAAR,QAAQ,CAAlE;KAA+F;IAE7F,gBAAF,CAAA,SAAA,CAAA,MAAA,GAAA,UAAA,KAAA,EAAA,KAAA,EAAA,IAAA,EAAA;QACI,IAAI,KAAK,GAAb,IAAA,CAAqB;QACrB,IAAM,IAAN,CAAA,QAAA,CAAA,QAAA,EAA8B;YAC9B,OAAA,IAAA,CAAA,KAAA,EAAA,KAAA,CAAA,CAAA;SAEA;QACI,IAAJ,OAAA,GAAA,IAAA,CAAA,QAAA,IAAA,EAAqC,CAArC;QACI,IAAJ,MAAA,GAAA,OAAA,CAAA,MAAA,IAAA,OAAA,CAAA;QACI,IAAJ,UAAA,GAAqB,yBAArB,CAAA,KAAA,CAAA,CAAA;;;QAQI,IAAJ,aAAA,GAAA,KAAA,GAAA,GAAA,CAAA,IAAwC,CAAxC,QAAA,EAAA,EAAA,CAAA,CAAA,GAA0D,GAA1D,GAAA,GAAA,CAAA,IAAA,CAAA,UAAA,EAAA,EAAA,CAAA,CAAA,GAAA,GAAA,GAAA,GAAA,CAAA,IAAA,CAAA,UAAA,EAAA,EAAA,CAAA,CAAA,GAAA,GAAA,GAAA,GAAA,CAAA,IAAA,CAAA,eAAA,EAAA,EAAA,CAAA,CAAA,CAAA;QACI,IAAJ,OAAA,GAAA,SAAA,GAAA,UAAA,GAA2C,aAA3C,CAAA;QAEI,IAAI,YAAR,GAAA,OAAA,CAAA,SAAA,GAAA,MAAA,CAAA,cAAA,GAAA,MAAA,CAAA,KAAA,CAAA;QACA,IAAM;YACN,YAAA,CAAA,IAAA,CAAA,MAAA,EAAA,OAAA,CAAA,CAAA;SAAA;QACA,OAAA,CAAA,EAAA;YACA,OAAA,CAAA,GAAA,CAAA,OAAA,CAAA,CAAA;SAEA;QACA,IAAM,OAAN,KAAA,CAAA,OAA0B,KAA1B,WAAA,EAAA;YACA,IAAA,CAAA,GAAA,CAAA,SAAA,EAAA,mCAAA,EAAA,KAAA,CAAA,OAAA,CAAA,CAAA;SAEA;QAEI,IAAJ,CAAA,GAAA,CAAA,YAAA,EAAA,mCAAA,EAAA,KAAA,CAAA,CAAA;QAEA,OAAA,IAAA,CAAgB,KAAhB,EAAA,KAAA,CAA6B,CAA7B,IAAA,CAAA,GAAA,CAAA,UAAA,SAAA,EAAA;YACQ,KAAK,CAAb,GAAA,CAAA,YAAA,EAAA,mCAAA,EAAA,SAAA,CAAA,CAAA;YACA,IAAU;gBACV,MAAA,CAAA,QAAA,EAAA,CAAA;aAAA;YACA,OAAA,CAAA,EAAgB;gBAChB,MAAA,CAAA,GAAA,CAAA,eAAA,CAAA,CAAA;aACA;SAEA,CAAA,CAAA,CAAA;KAEA,CAAA;IACA,gBAAA,CAAiB,SAAjB,CAAA,GAAA,GAAiC,UAAjC,KAAA,EAAA,KAAA,EAAA,OAAA,EAAA;QACI,IAAJ,OAAA,GAAA,IAAA,CAAA,QAAA,IAAA,EAAqC,CAArC;QAEI,IAAI,MAAR,GAAiB,OAAjB,CAAA,MAAA,IAAA,OAAA,CAAA;QACA,IAAM,IAAN,CAAA,IAAA,EAAiB,EAAjB;YACA,MAAA,CAAA,GAAA,CAAA,KAAA,EAAA,OAAA,CAAA,CAAA;SAAA;aACA;YACA,MAAA,CAAA,GAAA,CAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,OAAA,CAAA,CAAA;SACA;KAEA,CAAA;IACA,gBAAA,CAAA,SAAA,CAAA,IAAA,GAAA,YAAA;QACI,IAAI,EAAR,GAAa,OAAb,MAAA,KAAA,WAAA,IAAA,MAAA,CAAA,SAAA,CAAA,SAAA,GAAA,MAAA,CAAA,SAAA,CAAA,SAAA,GAAA,EAAA,CAAA;QAEI,IAAJ,KAAA,GAAgB,KAAK,CAAC;QAClB,IAAJ,MAAA,GAAA,EAAmB,CAAnB,OAAA,CAAA,OAAA,CAAA,CAAA;QAEI,IAAI,MAAM,GAAG,EAAE,CAAnB,OAAA,CAAA,UAAA,CAAA,CAAA;QACA,IAAM,MAAN,GAAA,CAAA,CAAA,IAAA,MAAA,GAAA,CAAA,CAAA,EAAA;YACA,KAAA,GAAA,IAAA,CAAA;SAEA;QACA,OAAA,KAAA,CAAA;;;CAtEA,EAAA,CAAA,CAAA;;;CAEA,CAAA;;;;;;ADJA,IAAA,YAAA,GAAA,IAAA,cAAA,CAAA,qBAAA,CAAA,CAAoE;AAEpE,AAAA,SAAA,oBAAA,CAAqC,OAAgC,EAArE;IACE,IAAF,oBAAA,GAAA;QACI,MAAM,EAAE,OAAO;QACf,SAAS,EAAE,KAAK;QAChB,QAAQ,EAAE,KAAK;KAChB,CAAC;IAEF,OAAF,MAAA,CAAA,MAAA,CAAA,EAAA,EACO,oBAAoB,EACpB,OAAO,CAFd,CAGI;CACH;AAGD,AAAA,IAAA,sBAAA,kBAAA,YAAA;IACE,SAAF,sBAAA,GAAA;KACA;IACA,sBAAA,CAAA,OAAA,GAAA,UAAA,OAAA,EAAA;QACA,OAAA;YACA,QAAA,EAAA,sBAAA;YACA,SAAA,EAAA;gBACA;oBACU,OAAO,EAAjB,YAAA;oBACA,QAAA,EAAA,gBAAA;oBACA,KAAA,EAAA,IAAA;iBACA;gBACA;oBACA,OAAA,EAAA,YAAA;oBACA,QAAA,EAAA,OAAA;iBACA;gBACA;oBACU,OAAO,EAAjB,0BAAA;oBACA,UAAA,EAAA,oBAAA;oBACA,IAAA,EAAA,CAAA,YAAA,CAAA;iBACA;aACA;;;IAtBA,OAAA,sBAAA,CAAA;;;;;;;;;;;;"
}
