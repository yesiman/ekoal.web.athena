{
  "version": 3,
  "file": "ngxs-store.js",
  "sources": [
    "ng://@ngxs/store/packages/store/src/selector.ts",
    "ng://@ngxs/store/packages/store/src/memoize.ts",
    "ng://@ngxs/store/packages/store/src/state.ts",
    "ng://@ngxs/store/packages/store/src/action.ts",
    "ng://@ngxs/store/packages/store/src/module.ts",
    "ng://@ngxs/store/packages/store/src/actions.ts",
    "ng://@ngxs/store/packages/store/src/select.ts",
    "ng://@ngxs/store/packages/store/src/store.ts",
    "ng://@ngxs/store/packages/store/src/selector-utils.ts",
    "ng://@ngxs/store/packages/store/src/state-factory.ts",
    "ng://@ngxs/store/packages/store/src/state-context-factory.ts",
    "ng://@ngxs/store/packages/store/src/state-operations.ts",
    "ng://@ngxs/store/packages/store/src/freeze.ts",
    "ng://@ngxs/store/packages/store/src/dispatcher.ts",
    "ng://@ngxs/store/packages/store/src/zone.ts",
    "ng://@ngxs/store/packages/store/src/plugin-manager.ts",
    "ng://@ngxs/store/packages/store/src/state-stream.ts",
    "ng://@ngxs/store/packages/store/src/compose.ts",
    "ng://@ngxs/store/packages/store/src/actions-stream.ts",
    "ng://@ngxs/store/packages/store/src/of-action.ts",
    "ng://@ngxs/store/packages/store/src/utils.ts",
    "ng://@ngxs/store/packages/store/src/internals.ts",
    "ng://@ngxs/store/packages/store/src/symbols.ts"
  ],
  "sourcesContent": [
    "import { memoize } from './memoize';\nimport { getValue } from './utils';\nimport { ensureStoreMetadata, ensureSelectorMetadata } from './internals';\nimport { getSelectorFn } from './selector-utils';\n\n/**\n * Decorator for memoizing a state selector.\n */\nexport function Selector(selectors?: any[]) {\n  return (target: any, key: string, descriptor: PropertyDescriptor) => {\n    const metadata = ensureStoreMetadata(target);\n\n    if (descriptor.value !== null) {\n      const prev = descriptor.value;\n      const wrappedFn = function wrappedSelectorFn(...args) {\n        const returnValue = prev(...args);\n        if (returnValue instanceof Function) {\n          const innerMemoizedFn = memoize.apply(null, [returnValue]);\n          return innerMemoizedFn;\n        }\n        return returnValue;\n      };\n      const memoizedFn = memoize(wrappedFn);\n\n      const fn = state => {\n        const results = [];\n\n        // If we are on a state class, get the metadata path\n        if (metadata && metadata.path) {\n          results.push(getValue(state, metadata.path));\n        }\n\n        // Allow additional selectors if passed\n        if (selectors) {\n          results.push(...selectors.map(a => getSelectorFn(a)(state)));\n        }\n\n        // if the lambda tries to access a something on the\n        // state that doesn't exist, it will throw a TypeError.\n        // since this is quite usual behaviour, we simply return undefined if so.\n        try {\n          return memoizedFn(...results);\n        } catch (ex) {\n          if (ex instanceof TypeError) {\n            return undefined;\n          }\n          throw ex;\n        }\n      };\n\n      const selectorMetaData = ensureSelectorMetadata(memoizedFn);\n      selectorMetaData.originalFn = prev;\n      selectorMetaData.storeMetaData = metadata;\n      selectorMetaData.selectFromAppState = fn;\n\n      return {\n        configurable: true,\n        get() {\n          return memoizedFn;\n        }\n      };\n    } else {\n      throw new Error('Selectors only work on methods');\n    }\n  };\n}\n",
    "function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n  const length = prev.length;\n  for (let i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Memoize a function on its last inputs only.\n * Oringinally from: https://github.com/reduxjs/reselect/blob/master/src/index.js\n *\n * @ignore\n */\nexport function memoize(func, equalityCheck = defaultEqualityCheck) {\n  let lastArgs = null;\n  let lastResult = null;\n  // we reference arguments instead of spreading them for performance reasons\n  return <(...args) => any>function memoized() {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n",
    "import { ensureStoreMetadata } from './internals';\nimport { StoreOptions, META_KEY } from './symbols';\n\nconst stateNameRegex = new RegExp('^[a-zA-Z0-9]+$');\n\n/**\n * Error message\n * @ignore\n */\nexport const stateNameErrorMessage = name =>\n  `${name} is not a valid state name. It needs to be a valid object property name.`;\n\n/**\n * Decorates a class with ngxs state information.\n */\nexport function State<T>(options: StoreOptions<T>) {\n  return function(target: any) {\n    const meta = ensureStoreMetadata(target);\n\n    // Handle inheritance\n    if (Object.getPrototypeOf(target).hasOwnProperty(META_KEY)) {\n      const parentMeta = Object.getPrototypeOf(target)[META_KEY];\n\n      meta.actions = {\n        ...meta.actions,\n        ...parentMeta.actions\n      };\n    }\n\n    meta.children = options.children;\n    meta.defaults = options.defaults;\n    meta.name = options.name;\n\n    if (!options.name) {\n      throw new Error(`States must register a 'name' property`);\n    }\n\n    if (!stateNameRegex.test(options.name)) {\n      throw new Error(stateNameErrorMessage(options.name));\n    }\n  };\n}\n",
    "import { ensureStoreMetadata } from './internals';\nimport { ActionOptions } from './symbols';\n\n/**\n * Decorates a method with a action information.\n */\nexport function Action(actions: any | any[], options?: ActionOptions) {\n  return function(target: any, name: string, descriptor: TypedPropertyDescriptor<any>) {\n    const meta = ensureStoreMetadata(target.constructor);\n\n    if (!Array.isArray(actions)) {\n      actions = [actions];\n    }\n\n    for (const action of actions) {\n      const type = action.type;\n\n      if (!action.type) {\n        throw new Error(`Action ${action.name} is missing a static \"type\" property`);\n      }\n\n      if (!meta.actions[type]) {\n        meta.actions[type] = [];\n      }\n\n      meta.actions[type].push({\n        fn: name,\n        options: options || {},\n        type\n      });\n    }\n  };\n}\n",
    "import { NgModule, ModuleWithProviders, Optional, Inject, InjectionToken } from '@angular/core';\n\nimport { ROOT_STATE_TOKEN, FEATURE_STATE_TOKEN, NgxsConfig } from './symbols';\nimport { StateFactory } from './state-factory';\nimport { StateContextFactory } from './state-context-factory';\nimport { Actions, InternalActions } from './actions-stream';\nimport { InternalDispatcher, InternalDispatchedActionResults } from './dispatcher';\nimport { InternalStateOperations } from './state-operations';\nimport { Store } from './store';\nimport { SelectFactory } from './select';\nimport { StateStream } from './state-stream';\nimport { PluginManager } from './plugin-manager';\nimport { InitState, UpdateState } from './actions';\n\n/**\n * Root module\n * @ignore\n */\n@NgModule()\nexport class NgxsRootModule {\n  constructor(\n    factory: StateFactory,\n    internalStateOperations: InternalStateOperations,\n    store: Store,\n    select: SelectFactory,\n    @Optional()\n    @Inject(ROOT_STATE_TOKEN)\n    states: any[]\n  ) {\n    // add stores to the state graph and return their defaults\n    const results = factory.addAndReturnDefaults(states);\n\n    const stateOperations = internalStateOperations.getRootStateOperations();\n    if (results) {\n      // get our current stream\n      const cur = stateOperations.getState();\n\n      // set the state to the current + new\n      stateOperations.setState({ ...cur, ...results.defaults });\n    }\n\n    // connect our actions stream\n    factory.connectActionHandlers();\n\n    // dispatch the init action and invoke init function after\n    stateOperations.dispatch(new InitState()).subscribe(() => {\n      if (results) {\n        factory.invokeInit(results.states);\n      }\n    });\n  }\n}\n\n/**\n * Feature module\n * @ignore\n */\n@NgModule({})\nexport class NgxsFeatureModule {\n  constructor(\n    store: Store,\n    internalStateOperations: InternalStateOperations,\n    factory: StateFactory,\n    @Optional()\n    @Inject(FEATURE_STATE_TOKEN)\n    states: any[][]\n  ) {\n    // Since FEATURE_STATE_TOKEN is a multi token, we need to\n    // flatten it [[Feature1State, Feature2State], [Feature3State]]\n    const flattenedStates = ([] as any[]).concat(...states);\n\n    // add stores to the state graph and return their defaults\n    const results = factory.addAndReturnDefaults(flattenedStates);\n\n    const stateOperations = internalStateOperations.getRootStateOperations();\n    if (results) {\n      // get our current stream\n      const cur = stateOperations.getState();\n\n      // set the state to the current + new\n      stateOperations.setState({ ...cur, ...results.defaults });\n    }\n\n    stateOperations.dispatch(new UpdateState()).subscribe(() => {\n      if (results) {\n        factory.invokeInit(results.states);\n      }\n    });\n  }\n}\n\nexport type ModuleOptions = Partial<NgxsConfig>;\n\nexport function ngxsConfigFactory(options: ModuleOptions): NgxsConfig {\n  const config = Object.assign(new NgxsConfig(), options);\n  return config;\n}\n\nexport const ROOT_OPTIONS = new InjectionToken('ROOT_OPTIONS');\n\n/**\n * Ngxs Module\n */\n@NgModule({})\nexport class NgxsModule {\n  /**\n   * Root module factory\n   */\n  static forRoot(states: any[] = [], options: ModuleOptions = {}): ModuleWithProviders {\n    return {\n      ngModule: NgxsRootModule,\n      providers: [\n        StateFactory,\n        StateContextFactory,\n        Actions,\n        InternalActions,\n        InternalDispatcher,\n        InternalDispatchedActionResults,\n        InternalStateOperations,\n        Store,\n        StateStream,\n        SelectFactory,\n        PluginManager,\n        ...states,\n        {\n          provide: ROOT_STATE_TOKEN,\n          useValue: states\n        },\n        {\n          provide: ROOT_OPTIONS,\n          useValue: options\n        },\n        {\n          provide: NgxsConfig,\n          useFactory: ngxsConfigFactory,\n          deps: [ROOT_OPTIONS]\n        }\n      ]\n    };\n  }\n\n  /**\n   * Feature module factory\n   */\n  static forFeature(states: any[]): ModuleWithProviders {\n    return {\n      ngModule: NgxsFeatureModule,\n      providers: [\n        StateFactory,\n        PluginManager,\n        ...states,\n        {\n          provide: FEATURE_STATE_TOKEN,\n          multi: true,\n          useValue: states\n        }\n      ]\n    };\n  }\n}\n",
    "/**\n * Init action\n */\nexport class InitState {\n  static readonly type = '@@INIT';\n}\n\n/**\n * Update action\n */\nexport class UpdateState {\n  static readonly type = '@@UPDATE_STATE';\n}\n",
    "import { Injectable } from '@angular/core';\n\nimport { Store } from './store';\nimport { fastPropGetter } from './internals';\nimport { META_KEY } from './symbols';\n\n/**\n * Allows the select decorator to get access to the DI store.\n * @ignore\n */\n@Injectable()\nexport class SelectFactory {\n  static store: Store | undefined = undefined;\n  constructor(store: Store) {\n    SelectFactory.store = store;\n  }\n}\n\n/**\n * Decorator for selecting a slice of state from the store.\n */\nexport function Select(selectorOrFeature?, ...paths: string[]) {\n  return function(target: any, name: string) {\n    const selectorFnName = '__' + name + '__selector';\n\n    if (!selectorOrFeature) {\n      // if foo$ => make it just foo\n      selectorOrFeature = name.lastIndexOf('$') === name.length - 1 ? name.substring(0, name.length - 1) : name;\n    }\n\n    const createSelect = fn => {\n      const store = SelectFactory.store;\n\n      if (!store) {\n        throw new Error('SelectFactory not connected to store!');\n      }\n\n      return store.select(fn);\n    };\n\n    const createSelector = () => {\n      if (typeof selectorOrFeature === 'string') {\n        const propsArray = paths.length ? [selectorOrFeature, ...paths] : selectorOrFeature.split('.');\n\n        return fastPropGetter(propsArray);\n      } else if (selectorOrFeature[META_KEY] && selectorOrFeature[META_KEY].path) {\n        return fastPropGetter(selectorOrFeature[META_KEY].path.split('.'));\n      } else {\n        return selectorOrFeature;\n      }\n    };\n\n    if (target[selectorFnName]) {\n      throw new Error('You cannot use @Select decorator and a ' + selectorFnName + ' property.');\n    }\n\n    if (delete target[name]) {\n      Object.defineProperty(target, selectorFnName, {\n        writable: true,\n        enumerable: false,\n        configurable: true\n      });\n\n      Object.defineProperty(target, name, {\n        get: function() {\n          return this[selectorFnName] || (this[selectorFnName] = createSelect.apply(this, [createSelector()]));\n        },\n        enumerable: true,\n        configurable: true\n      });\n    }\n  };\n}\n",
    "import { Injectable, NgZone } from '@angular/core';\nimport { Observable, of, Subscription } from 'rxjs';\nimport { catchError, distinctUntilChanged, map, take } from 'rxjs/operators';\n\nimport { getSelectorFn } from './selector-utils';\nimport { InternalStateOperations } from './state-operations';\nimport { StateStream } from './state-stream';\nimport { enterZone } from './zone';\n\n@Injectable()\nexport class Store {\n  constructor(\n    private _ngZone: NgZone,\n    private _stateStream: StateStream,\n    private _internalStateOperations: InternalStateOperations\n  ) {}\n\n  /**\n   * Dispatches event(s).\n   */\n  dispatch(event: any | any[]): Observable<any> {\n    return this._internalStateOperations.getRootStateOperations().dispatch(event);\n  }\n\n  /**\n   * Selects a slice of data from the store.\n   */\n  select<T>(selector: (state: any, ...states: any[]) => T): Observable<T>;\n  select(selector: string | any): Observable<any>;\n  select(selector: any): Observable<any> {\n    const selectorFn = getSelectorFn(selector);\n    return this._stateStream.pipe(\n      map(selectorFn),\n      catchError(err => {\n        // if error is TypeError we swallow it to prevent usual errors with property access\n        if (err instanceof TypeError) {\n          return of(undefined);\n        }\n\n        // rethrow other errors\n        throw err;\n      }),\n      distinctUntilChanged(),\n      enterZone(this._ngZone)\n    );\n  }\n\n  /**\n   * Select one slice of data from the store.\n   */\n  selectOnce<T>(selector: (state: any, ...states: any[]) => T): Observable<T>;\n  selectOnce(selector: string | any): Observable<any>;\n  selectOnce(selector: any): Observable<any> {\n    return this.select(selector).pipe(take(1));\n  }\n\n  /**\n   * Select a snapshot from the state.\n   */\n  selectSnapshot<T>(selector: (state: any, ...states: any[]) => T): T;\n  selectSnapshot(selector: string | any): any;\n  selectSnapshot(selector: any): any {\n    const selectorFn = getSelectorFn(selector);\n    return selectorFn(this._stateStream.getValue());\n  }\n\n  /**\n   * Allow the user to subscribe to the root of the state\n   */\n  subscribe(fn?: any): Subscription {\n    return this._stateStream.pipe(enterZone(this._ngZone)).subscribe(fn);\n  }\n\n  /**\n   * Return the raw value of the state.\n   */\n  snapshot(): any {\n    return this._internalStateOperations.getRootStateOperations().getState();\n  }\n\n  /**\n   * Reset the state to a specific point in time. This method is useful\n   * for plugin's who need to modify the state directly or unit testing.\n   */\n  reset(state: any) {\n    return this._internalStateOperations.getRootStateOperations().setState(state);\n  }\n}\n",
    "import { META_KEY } from './symbols';\nimport { SelectFromState, SelectorMetaDataModel, fastPropGetter } from './internals';\n\n/**\n * This function gets the selector function to be used to get the selected slice from the app state\n * @ignore\n */\nexport function getSelectorFn(selector: any): SelectFromState {\n  const metadata = selector[META_KEY];\n  if (metadata) {\n    const selectFromAppState = (<SelectorMetaDataModel>metadata).selectFromAppState;\n    if (selectFromAppState) {\n      return selectFromAppState;\n    } else if (metadata.path) {\n      return fastPropGetter(metadata.path.split('.'));\n    }\n  }\n  return selector;\n}\n",
    "import { Injector, Injectable, SkipSelf, Optional } from '@angular/core';\nimport { Observable, of, forkJoin, from, throwError } from 'rxjs';\nimport { shareReplay, takeUntil, map, catchError, filter, mergeMap, defaultIfEmpty } from 'rxjs/operators';\n\nimport { META_KEY, NgxsLifeCycle } from './symbols';\nimport {\n  topologicalSort,\n  buildGraph,\n  findFullParentPath,\n  nameToState,\n  isObject,\n  StateClass,\n  MappedStore\n} from './internals';\nimport { getActionTypeFromInstance, setValue } from './utils';\nimport { ofActionDispatched } from './of-action';\nimport { InternalActions, ActionStatus, ActionContext } from './actions-stream';\nimport { InternalDispatchedActionResults } from './dispatcher';\nimport { StateContextFactory } from './state-context-factory';\n\n/**\n * State factory class\n * @ignore\n */\n@Injectable()\nexport class StateFactory {\n  get states(): MappedStore[] {\n    return this._parentFactory ? this._parentFactory.states : this._states;\n  }\n\n  private _states: MappedStore[] = [];\n  private _connected = false;\n\n  constructor(\n    private _injector: Injector,\n    @Optional()\n    @SkipSelf()\n    private _parentFactory: StateFactory,\n    private _actions: InternalActions,\n    private _actionResults: InternalDispatchedActionResults,\n    private _stateContextFactory: StateContextFactory\n  ) {}\n\n  /**\n   * Add a new state to the global defs.\n   */\n  add(oneOrManyStateClasses: StateClass | StateClass[]): MappedStore[] {\n    let stateClasses: StateClass[];\n    if (!Array.isArray(oneOrManyStateClasses)) {\n      stateClasses = [oneOrManyStateClasses];\n    } else {\n      stateClasses = oneOrManyStateClasses;\n    }\n\n    const stateGraph = buildGraph(stateClasses);\n    const sortedStates = topologicalSort(stateGraph);\n    const depths = findFullParentPath(stateGraph);\n    const nameGraph = nameToState(stateClasses);\n    const mappedStores: MappedStore[] = [];\n\n    for (const name of sortedStates) {\n      const stateClass = nameGraph[name];\n\n      if (!stateClass[META_KEY]) {\n        throw new Error('States must be decorated with @State() decorator');\n      }\n\n      const depth = depths[name];\n      const { actions } = stateClass[META_KEY];\n      let { defaults } = stateClass[META_KEY];\n\n      stateClass[META_KEY].path = depth;\n\n      // ensure our store hasn't already been added\n      // but dont throw since it could be lazy\n      // loaded from different paths\n      const has = this.states.find(s => s.name === name);\n      if (!has) {\n        // create new instance of defaults\n        if (Array.isArray(defaults)) {\n          defaults = [...defaults];\n        } else if (isObject(defaults)) {\n          defaults = { ...defaults };\n        } else if (defaults === undefined) {\n          defaults = {};\n        }\n\n        const instance = this._injector.get(stateClass);\n\n        mappedStores.push({\n          actions,\n          instance,\n          defaults,\n          name,\n          depth\n        });\n      }\n    }\n\n    this.states.push(...mappedStores);\n\n    return mappedStores;\n  }\n\n  /**\n   * Add a set of states to the store and return the defaulsts\n   */\n  addAndReturnDefaults(stateClasses: any[]): { defaults: any; states: MappedStore[] } {\n    if (stateClasses) {\n      const states = this.add(stateClasses);\n      const defaults = states.reduce(\n        (result: any, meta: MappedStore) => setValue(result, meta.depth, meta.defaults),\n        {}\n      );\n      return { defaults, states };\n    }\n  }\n\n  /**\n   * Bind the actions to the handlers\n   */\n  connectActionHandlers() {\n    if (this._connected) return;\n    this._actions\n      .pipe(\n        filter((ctx: ActionContext) => ctx.status === ActionStatus.Dispatched),\n        mergeMap(({ action }) =>\n          this.invokeActions(this._actions, action).pipe(\n            map(() => <ActionContext>{ action, status: ActionStatus.Successful }),\n            defaultIfEmpty(<ActionContext>{ action, status: ActionStatus.Canceled }),\n            catchError(error => of(<ActionContext>{ action, status: ActionStatus.Errored, error }))\n          )\n        )\n      )\n      .subscribe(ctx => this._actionResults.next(ctx));\n    this._connected = true;\n  }\n\n  /**\n   * Invoke the init function on the states.\n   */\n  invokeInit(stateMetadatas: MappedStore[]) {\n    for (const metadata of stateMetadatas) {\n      const instance: NgxsLifeCycle = metadata.instance;\n\n      if (instance.ngxsOnInit) {\n        const stateContext = this.createStateContext(metadata);\n        instance.ngxsOnInit(stateContext);\n      }\n    }\n  }\n\n  /**\n   * Invoke actions on the states.\n   */\n  invokeActions(actions$: InternalActions, action) {\n    const results = [];\n\n    for (const metadata of this.states) {\n      const type = getActionTypeFromInstance(action);\n      const actionMetas = metadata.actions[type];\n\n      if (actionMetas) {\n        for (const actionMeta of actionMetas) {\n          const stateContext = this.createStateContext(metadata);\n          try {\n            let result = metadata.instance[actionMeta.fn](stateContext, action);\n\n            if (result instanceof Promise) {\n              result = from(result);\n            }\n\n            if (result instanceof Observable) {\n              result = result.pipe(\n                actionMeta.options.cancelUncompleted\n                  ? takeUntil(actions$.pipe(ofActionDispatched(action)))\n                  : map(r => r)\n              ); // map acts like a noop\n            } else {\n              result = of({}).pipe(shareReplay());\n            }\n\n            results.push(result);\n          } catch (e) {\n            results.push(throwError(e));\n          }\n        }\n      }\n    }\n\n    if (!results.length) {\n      results.push(of({}));\n    }\n\n    return forkJoin(results);\n  }\n\n  /**\n   * Create the state context\n   */\n  private createStateContext(metadata: MappedStore) {\n    return this._stateContextFactory.createStateContext(metadata);\n  }\n}\n",
    "import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { StateContext } from './symbols';\nimport { MappedStore } from './internals';\nimport { setValue, getValue } from './utils';\nimport { InternalStateOperations } from './state-operations';\n\n/**\n * State Context factory class\n * @ignore\n */\n@Injectable()\nexport class StateContextFactory {\n  constructor(\n    private _internalStateOperations: InternalStateOperations\n  ) {}\n\n  /**\n   * Create the state context\n   */\n  createStateContext(metadata: MappedStore): StateContext<any> {\n    const root = this._internalStateOperations.getRootStateOperations();\n    return {\n      getState(): any {\n        const state = root.getState();\n        return getValue(state, metadata.depth);\n      },\n      patchState(val: any): any {\n        const isArray = Array.isArray(val);\n        const isPrimitive = typeof val !== 'object';\n\n        if (isArray) {\n          throw new Error('Patching arrays is not supported.');\n        } else if (isPrimitive) {\n          throw new Error('Patching primitives is not supported.');\n        }\n\n        const state = root.getState();\n        const local = getValue(state, metadata.depth);\n        const clone = { ...local };\n\n        for (const k in val) {\n          clone[k] = val[k];\n        }\n\n        const newState = setValue(state, metadata.depth, clone);\n        root.setState(newState);\n        return newState;\n      },\n      setState(val: any): any {\n        let state = root.getState();\n        state = setValue(state, metadata.depth, val);\n        root.setState(state);\n        return state;\n      },\n      dispatch(actions: any | any[]): Observable<any> {\n        return root.dispatch(actions);\n      }\n    };\n  }\n}\n",
    "import { Injectable } from '@angular/core';\n\nimport { StateOperations } from './internals';\nimport { InternalDispatcher } from './dispatcher';\nimport { StateStream } from './state-stream';\nimport { NgxsConfig } from './symbols';\nimport { deepFreeze } from './freeze';\n\n/**\n * State Context factory class\n * @ignore\n */\n@Injectable()\nexport class InternalStateOperations {\n  constructor(\n    private _stateStream: StateStream,\n    private _dispatcher: InternalDispatcher,\n    private _config: NgxsConfig\n  ) {}\n\n  /**\n   * Returns the root state operators.\n   */\n  getRootStateOperations(): StateOperations<any> {\n    const rootStateOperations = {\n      getState: () => this._stateStream.getValue(),\n      setState: newState => this._stateStream.next(newState),\n      dispatch: actions => this._dispatcher.dispatch(actions)\n    };\n\n    if (this._config.developmentMode) {\n      return this.ensureStateAndActionsAreImmutable(rootStateOperations);\n    }\n\n    return rootStateOperations;\n  }\n\n  private ensureStateAndActionsAreImmutable(root: StateOperations<any>): StateOperations<any> {\n    return {\n      getState: () => root.getState(),\n      setState: value => {\n        const frozenValue = deepFreeze(value);\n        return root.setState(frozenValue);\n      },\n      dispatch: actions => {\n        return root.dispatch(actions);\n      }\n    };\n  }\n}\n",
    "/**\n * Object freeze code\n * https://github.com/jsdf/deep-freeze\n */\nexport const deepFreeze = o => {\n  Object.freeze(o);\n\n  const oIsFunction = typeof o === 'function';\n  const hasOwnProp = Object.prototype.hasOwnProperty;\n\n  Object.getOwnPropertyNames(o).forEach(function(prop) {\n    if (\n      hasOwnProp.call(o, prop) &&\n      (oIsFunction ? prop !== 'caller' && prop !== 'callee' && prop !== 'arguments' : true) &&\n      o[prop] !== null &&\n      (typeof o[prop] === 'object' || typeof o[prop] === 'function') &&\n      !Object.isFrozen(o[prop])\n    ) {\n      deepFreeze(o[prop]);\n    }\n  });\n\n  return o;\n};\n",
    "import { Injectable, ErrorHandler, NgZone } from '@angular/core';\nimport { Observable, of, forkJoin, empty, Subject, throwError } from 'rxjs';\nimport { shareReplay, filter, exhaustMap, take } from 'rxjs/operators';\n\nimport { compose } from './compose';\nimport { InternalActions, ActionStatus, ActionContext } from './actions-stream';\nimport { StateStream } from './state-stream';\nimport { PluginManager } from './plugin-manager';\nimport { enterZone } from './zone';\n\n/**\n * Internal Action result stream that is emitted when an action is completed.\n * This is used as a method of returning the action result to the dispatcher\n * for the observable returned by the dispatch(...) call.\n * The dispatcher then asynchronously pushes the result from this stream onto the main action stream as a result.\n */\n@Injectable()\nexport class InternalDispatchedActionResults extends Subject<ActionContext> {}\n\n@Injectable()\nexport class InternalDispatcher {\n  constructor(\n    private _errorHandler: ErrorHandler,\n    private _actions: InternalActions,\n    private _actionResults: InternalDispatchedActionResults,\n    private _pluginManager: PluginManager,\n    private _stateStream: StateStream,\n    private _ngZone: NgZone\n  ) {}\n\n  /**\n   * Dispatches event(s).\n   */\n  dispatch(event: any | any[]): Observable<any> {\n    const result: Observable<any> = this._ngZone.runOutsideAngular(() => {\n      if (Array.isArray(event)) {\n        return forkJoin(event.map(a => this.dispatchSingle(a)));\n      } else {\n        return this.dispatchSingle(event);\n      }\n    });\n\n    result.subscribe({\n      error: error => this._ngZone.run(() => this._errorHandler.handleError(error))\n    });\n\n    return result.pipe(enterZone(this._ngZone));\n  }\n\n  private dispatchSingle(action: any): Observable<any> {\n    const prevState = this._stateStream.getValue();\n    const plugins = this._pluginManager.plugins;\n\n    return (compose([\n      ...plugins,\n      (nextState, nextAction) => {\n        if (nextState !== prevState) {\n          this._stateStream.next(nextState);\n        }\n        const actionResult$ = this.getActionResultStream(nextAction);\n        actionResult$.subscribe(ctx => this._actions.next(ctx));\n        this._actions.next({ action: nextAction, status: ActionStatus.Dispatched });\n        return this.createDispatchObservable(actionResult$);\n      }\n    ])(prevState, action) as Observable<any>).pipe(shareReplay());\n  }\n\n  private getActionResultStream(action: any): Observable<ActionContext> {\n    return this._actionResults.pipe(\n      filter((ctx: ActionContext) => ctx.action === action && ctx.status !== ActionStatus.Dispatched),\n      take(1),\n      shareReplay()\n    );\n  }\n\n  private createDispatchObservable(actionResult$: Observable<ActionContext>): Observable<any> {\n    return actionResult$\n      .pipe(\n        exhaustMap((ctx: ActionContext) => {\n          switch (ctx.status) {\n            case ActionStatus.Successful:\n              return of(this._stateStream.getValue());\n            case ActionStatus.Errored:\n              return throwError(ctx.error);\n            default:\n              return empty();\n          }\n        })\n      )\n      .pipe(shareReplay());\n  }\n}\n",
    "import { Observable, Observer } from 'rxjs';\nimport { NgZone } from '@angular/core';\n\n/**\n * Operator to run the `subscribe` in a Angular zone.\n */\nexport function enterZone<T>(zone: NgZone) {\n  return (source: Observable<T>) => {\n    return new Observable((sink: Observer<T>) => {\n      return source.subscribe({\n        next(x) {\n          zone.run(() => sink.next(x));\n        },\n        error(e) {\n          zone.run(() => sink.error(e));\n        },\n        complete() {\n          zone.run(() => sink.complete());\n        }\n      });\n    });\n  };\n}\n",
    "import { Injectable, Optional, SkipSelf, Inject } from '@angular/core';\nimport { NgxsPluginFn, NGXS_PLUGINS, NgxsPlugin } from './symbols';\n\n/**\n * Plugin manager class\n * @ignore\n */\n@Injectable()\nexport class PluginManager {\n  plugins: NgxsPluginFn[] = [];\n\n  constructor(\n    @Optional()\n    @SkipSelf()\n    private _parentManager: PluginManager,\n    @Inject(NGXS_PLUGINS)\n    @Optional()\n    private _plugins: NgxsPlugin[]\n  ) {\n    this.register();\n  }\n\n  private register() {\n    if (!this._plugins) {\n      return;\n    }\n\n    this.plugins = this._plugins.map(plugin => {\n      if (plugin.handle) {\n        return plugin.handle.bind(plugin);\n      } else {\n        return plugin;\n      }\n    });\n\n    if (this._parentManager) {\n      this._parentManager.plugins.push(...this.plugins);\n    }\n  }\n}\n",
    "import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n/**\n * BehaviorSubject of the entire state.\n * @ignore\n */\n@Injectable()\nexport class StateStream extends BehaviorSubject<any> {\n  constructor() {\n    super({});\n  }\n}\n",
    "/**\n * Composes a array of functions from left to right. Example:\n *\n *      compose([fn, final])(state, action);\n *\n * then the funcs have a signature like:\n *\n *      function fn (state, action, next) {\n *          console.log('here', state, action, next);\n *          return next(state, action);\n *      }\n *\n *      function final (state, action) {\n *          console.log('here', state, action);\n *          return state;\n *      }\n *\n * the last function should not call `next`.\n *\n * @ignore\n */\nexport const compose = funcs => (...args) => {\n  const curr = funcs.shift();\n  return curr(...args, (...nextArgs) => compose(funcs)(...nextArgs));\n};\n",
    "import { Injectable } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\n\n/**\n * Status of a dispatched action\n */\nexport const enum ActionStatus {\n  Dispatched = 'DISPATCHED',\n  Successful = 'SUCCESSFUL',\n  Canceled = 'CANCELED',\n  Errored = 'ERRORED'\n}\n\nexport interface ActionContext {\n  status: ActionStatus;\n  action: any;\n  error?: Error;\n}\n\n/**\n * Custom Subject that ensures that subscribers are notified of values in the order that they arrived.\n * A standard Subject does not have this guarantee.\n * For example, given the following code:\n * ```typescript\n *   const subject = new Subject<string>();\n     subject.subscribe(value => {\n       if (value === 'start') subject.next('end');\n     });\n     subject.subscribe(value => { });\n     subject.next('start');\n * ```\n * When `subject` is a standard `Subject<T>` the second subscriber would recieve `end` and then `start`.\n * When `subject` is a `OrderedSubject<T>` the second subscriber would recieve `start` and then `end`.\n */\nexport class OrderedSubject<T> extends Subject<T> {\n  private _itemQueue: T[] = [];\n  private _busyPushingNext = false;\n\n  next(value?: T): void {\n    if (this._busyPushingNext) {\n      this._itemQueue.unshift(value);\n      return;\n    }\n    this._busyPushingNext = true;\n    super.next(value);\n    while (this._itemQueue.length > 0) {\n      const nextValue = this._itemQueue.pop();\n      super.next(nextValue);\n    }\n    this._busyPushingNext = false;\n  }\n}\n\n/**\n * Internal Action stream that is emitted anytime an action is dispatched.\n */\n@Injectable()\nexport class InternalActions extends OrderedSubject<ActionContext> {}\n\n/**\n * Action stream that is emitted anytime an action is dispatched.\n *\n * You can listen to this in services to react without stores.\n */\n@Injectable()\nexport class Actions extends Observable<any> {\n  constructor(actions$: InternalActions) {\n    super(observer => {\n      actions$.subscribe(res => observer.next(res), err => observer.error(err), () => observer.complete());\n    });\n  }\n}\n",
    "import { OperatorFunction, Observable } from 'rxjs';\nimport { map, filter } from 'rxjs/operators';\nimport { getActionTypeFromInstance } from './utils';\nimport { ActionContext, ActionStatus } from './actions-stream';\n\nexport function ofAction<T>(allowedType): OperatorFunction<any, T>;\nexport function ofAction<T>(...allowedTypes): OperatorFunction<any, T>;\n\n/**\n * RxJS operator for selecting out specific actions.\n *\n * This will grab actions that have just been dispatched as well as actions that have completed\n */\nexport function ofAction(...allowedTypes: any[]) {\n  return ofActionOperator(allowedTypes);\n}\n\n/**\n * RxJS operator for selecting out specific actions.\n *\n * This will ONLY grab actions that have just been dispatched\n */\nexport function ofActionDispatched(...allowedTypes: any[]) {\n  return ofActionOperator(allowedTypes, ActionStatus.Dispatched);\n}\n\n/**\n * RxJS operator for selecting out specific actions.\n *\n * This will ONLY grab actions that have just been successfully completed\n */\nexport function ofActionSuccessful(...allowedTypes: any[]) {\n  return ofActionOperator(allowedTypes, ActionStatus.Successful);\n}\n\n/**\n * RxJS operator for selecting out specific actions.\n *\n * This will ONLY grab actions that have just been canceled\n */\nexport function ofActionCanceled(...allowedTypes: any[]) {\n  return ofActionOperator(allowedTypes, ActionStatus.Canceled);\n}\n\n/**\n * RxJS operator for selecting out specific actions.\n *\n * This will ONLY grab actions that have just thrown an error\n */\nexport function ofActionErrored(...allowedTypes: any[]) {\n  return ofActionOperator(allowedTypes, ActionStatus.Errored);\n}\n\nfunction ofActionOperator(allowedTypes: any[], status?: ActionStatus) {\n  const allowedMap = createAllowedMap(allowedTypes);\n  return function(o: Observable<any>) {\n    return o.pipe(filterStatus(allowedMap, status), mapAction());\n  };\n}\n\nfunction filterStatus(allowedTypes: { [key: string]: boolean }, status?: ActionStatus) {\n  return filter((ctx: ActionContext) => {\n    const actionType = getActionTypeFromInstance(ctx.action);\n    const type = allowedTypes[actionType];\n    return status ? type && ctx.status === status : type;\n  });\n}\n\nfunction mapAction() {\n  return map((ctx: ActionContext) => ctx.action);\n}\n\nfunction createAllowedMap(types: any[]): { [key: string]: boolean } {\n  return types.reduce((acc: any, klass: any) => {\n    acc[getActionTypeFromInstance(klass)] = true;\n    return acc;\n  }, {});\n}\n",
    "/**\n * Returns the type from an action instance.\n * @ignore\n */\nexport function getActionTypeFromInstance(action: any): string {\n  if (action.constructor && action.constructor.type) {\n    return action.constructor.type;\n  }\n\n  return action.type;\n}\n\n/**\n * Matches a action\n * @ignore\n */\nexport function actionMatcher(action1: any) {\n  const type1 = getActionTypeFromInstance(action1);\n\n  return function(action2: any) {\n    return type1 === getActionTypeFromInstance(action2);\n  };\n}\n\n/**\n * Set a deeply nested value. Example:\n *\n *   setValue({ foo: { bar: { eat: false } } },\n *      'foo.bar.eat', true) //=> { foo: { bar: { eat: true } } }\n *\n * While it traverses it also creates new objects from top down.\n *\n * @ignore\n */\nexport const setValue = (obj: any, prop: string, val: any) => {\n  obj = { ...obj };\n\n  const split = prop.split('.');\n  const last = split[split.length - 1];\n\n  split.reduce((acc, part) => {\n    if (part === last) {\n      acc[part] = val;\n    } else {\n      acc[part] = { ...acc[part] };\n    }\n\n    return acc && acc[part];\n  }, obj);\n\n  return obj;\n};\n\n/**\n * Get a deeply nested value. Example:\n *\n *    getValue({ foo: bar: [] }, 'foo.bar') //=> []\n *\n * @ignore\n */\nexport const getValue = (obj: any, prop: string) =>\n  prop.split('.').reduce((acc: any, part: string) => acc && acc[part], obj);\n",
    "import { META_KEY, ActionOptions } from './symbols';\nimport { Observable } from 'rxjs';\n\nexport interface ObjectKeyMap<T> {\n  [key: string]: T;\n}\n\nexport interface StateClass {\n  [META_KEY]?: MetaDataModel;\n}\n\nexport type StateKeyGraph = ObjectKeyMap<string[]>;\n\nexport interface ActionHandlerMetaData {\n  fn: string;\n  options: ActionOptions;\n  type: string;\n}\n\nexport interface StateOperations<T> {\n  getState(): T;\n  setState(val: T);\n  dispatch(actions: any | any[]): Observable<void>;\n}\n\nexport interface MetaDataModel {\n  name: string;\n  actions: ObjectKeyMap<ActionHandlerMetaData[]>;\n  defaults: any;\n  path: string;\n  children: StateClass[];\n  instance: any;\n}\n\nexport type SelectFromState = (state: any) => any;\n\nexport interface SelectorMetaDataModel {\n  selectFromAppState: SelectFromState;\n  originalFn: Function;\n  storeMetaData: MetaDataModel;\n}\n\nexport interface MappedStore {\n  name: string;\n  actions: ObjectKeyMap<ActionHandlerMetaData[]>;\n  defaults: any;\n  instance: any;\n  depth: string;\n}\n\n/**\n * Ensures metadata is attached to the class and returns it.\n *\n * @ignore\n */\nexport function ensureStoreMetadata(target): MetaDataModel {\n  if (!target.hasOwnProperty(META_KEY)) {\n    const defaultMetadata: MetaDataModel = {\n      name: null,\n      actions: {},\n      defaults: {},\n      path: null,\n      children: [],\n      instance: null\n    };\n\n    Object.defineProperty(target, META_KEY, { value: defaultMetadata });\n  }\n\n  return target[META_KEY];\n}\n\n/**\n * Ensures metadata is attached to the selector and returns it.\n *\n * @ignore\n */\nexport function ensureSelectorMetadata(target): SelectorMetaDataModel {\n  if (!target.hasOwnProperty(META_KEY)) {\n    const defaultMetadata: SelectorMetaDataModel = {\n      selectFromAppState: null,\n      originalFn: null,\n      storeMetaData: null\n    };\n\n    Object.defineProperty(target, META_KEY, { value: defaultMetadata });\n  }\n\n  return target[META_KEY];\n}\n\n/**\n * The generated function is faster than:\n * - pluck (Observable operator)\n * - memoize\n *\n * @ignore\n */\nexport function fastPropGetter(paths: string[]): (x: any) => any {\n  const segments = paths;\n  let seg = 'store.' + segments[0];\n  let i = 0;\n  const l = segments.length;\n\n  let expr = seg;\n  while (++i < l) {\n    expr = expr + ' && ' + (seg = seg + '.' + segments[i]);\n  }\n\n  const fn = new Function('store', 'return ' + expr + ';');\n\n  return <(x: any) => any>fn;\n}\n\n/**\n * Given an array of states, it will return a object graph. Example:\n *    const states = [\n *      Cart,\n *      CartSaved,\n *      CartSavedItems\n *    ]\n *\n * would return:\n *\n *  const graph = {\n *    cart: ['saved'],\n *    saved: ['items'],\n *    items: []\n *  };\n *\n * @ignore\n */\nexport function buildGraph(stateClasses: StateClass[]): StateKeyGraph {\n  const findName = (stateClass: StateClass) => {\n    const meta = stateClasses.find(g => g === stateClass);\n    if (!meta) {\n      throw new Error(`Child state not found: ${stateClass}`);\n    }\n\n    if (!meta[META_KEY]) {\n      throw new Error('States must be decorated with @State() decorator');\n    }\n\n    return meta[META_KEY].name;\n  };\n\n  return stateClasses.reduce<StateKeyGraph>((result: StateKeyGraph, stateClass: StateClass) => {\n    if (!stateClass[META_KEY]) {\n      throw new Error('States must be decorated with @State() decorator');\n    }\n\n    const { name, children } = stateClass[META_KEY];\n    result[name] = (children || []).map(findName);\n    return result;\n  }, {});\n}\n\n/**\n * Given a states array, returns object graph\n * returning the name and state metadata. Example:\n *\n *  const graph = {\n *    cart: { metadata }\n *  };\n *\n * @ignore\n */\nexport function nameToState(states: StateClass[]): ObjectKeyMap<StateClass> {\n  return states.reduce<ObjectKeyMap<StateClass>>((result: ObjectKeyMap<StateClass>, stateClass: StateClass) => {\n    if (!stateClass[META_KEY]) {\n      throw new Error('States must be decorated with @State() decorator');\n    }\n\n    const meta = stateClass[META_KEY];\n    result[meta.name] = stateClass;\n    return result;\n  }, {});\n}\n\n/**\n * Given a object relationship graph will return the full path\n * for the child items. Example:\n *\n *  const graph = {\n *    cart: ['saved'],\n *    saved: ['items'],\n *    items: []\n *  };\n *\n * would return:\n *\n *  const r = {\n *    cart: 'cart',\n *    saved: 'cart.saved',\n *    items: 'cart.saved.items'\n *  };\n *\n * @ignore\n */\nexport function findFullParentPath(obj: StateKeyGraph, newObj: ObjectKeyMap<string> = {}): ObjectKeyMap<string> {\n  const visit = (child: StateKeyGraph, keyToFind: string): string => {\n    for (const key in child) {\n      if (child.hasOwnProperty(key) && child[key].indexOf(keyToFind) >= 0) {\n        const parent = visit(child, key);\n        return parent !== null ? `${parent}.${key}` : key;\n      }\n    }\n    return null;\n  };\n\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      const parent = visit(obj, key);\n      newObj[key] = parent ? `${parent}.${key}` : key;\n    }\n  }\n\n  return newObj;\n}\n\n/**\n * Given a object graph, it will return the items topologically sorted Example:\n *\n *  const graph = {\n *    cart: ['saved'],\n *    saved: ['items'],\n *    items: []\n *  };\n *\n * would return:\n *\n *  const results = [\n *    'items',\n *    'saved',\n *    'cart'\n *  ];\n *\n * @ignore\n */\nexport function topologicalSort(graph: StateKeyGraph): string[] {\n  const sorted: string[] = [];\n  const visited: ObjectKeyMap<boolean> = {};\n\n  const visit = (name: string, ancestors: string[] = []) => {\n    if (!Array.isArray(ancestors)) {\n      ancestors = [];\n    }\n\n    ancestors.push(name);\n    visited[name] = true;\n\n    graph[name].forEach((dep: string) => {\n      if (ancestors.indexOf(dep) >= 0) {\n        throw new Error(`Circular dependency '${dep}' is required by '${name}': ${ancestors.join(' -> ')}`);\n      }\n\n      if (visited[dep]) {\n        return;\n      }\n\n      visit(dep, ancestors.slice(0));\n    });\n\n    if (sorted.indexOf(name) < 0) {\n      sorted.push(name);\n    }\n  };\n\n  Object.keys(graph).forEach(k => visit(k));\n\n  return sorted.reverse();\n}\n\n/**\n * Returns if the parameter is a object or not.\n *\n * @ignore\n */\nexport function isObject(obj) {\n  return (typeof obj === 'object' && obj !== null) || typeof obj === 'function';\n}\n",
    "import { InjectionToken } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nexport const ROOT_STATE_TOKEN = new InjectionToken<any>('ROOT_STATE_TOKEN');\nexport const FEATURE_STATE_TOKEN = new InjectionToken<any>('FEATURE_STATE_TOKEN');\nexport const META_KEY = 'NGXS_META';\n\nexport const NGXS_PLUGINS = new InjectionToken('NGXS_PLUGINS');\nexport type NgxsPluginConstructor = new (...args: any[]) => NgxsPlugin;\nexport type NgxsPluginFn = (state: any, mutation: any, next: NgxsNextPluginFn) => any;\n\n/**\n * The NGXS config settings.\n */\nexport class NgxsConfig {\n  /**\n   * Run in development mode. This will add additional debugging features:\n   * - Object.freeze on the state and actions to guarantee immutability\n   * (default: false)\n   */\n  developmentMode: boolean;\n}\n\n/**\n * State context provided to the actions in the state.\n */\nexport interface StateContext<T> {\n  /**\n   * Get the current state.\n   */\n  getState(): T;\n\n  /**\n   * Reset the state to a new value.\n   */\n  setState(val: T);\n\n  /**\n   * Patch the existing state with the provided value.\n   */\n  patchState(val: Partial<T>);\n\n  /**\n   * Dispatch a new action and return the dispatched observable.\n   */\n  dispatch(actions: any | any[]): Observable<void>;\n}\n\nexport type NgxsNextPluginFn = (state: any, mutation: any) => any;\n\n/**\n * Plugin interface\n */\nexport interface NgxsPlugin {\n  /**\n   * Handle the state/action before its submitted to the state handlers.\n   */\n  handle(state: any, action: any, next: NgxsNextPluginFn): any;\n}\n\n/**\n * Options that can be provided to the store.\n */\nexport interface StoreOptions<T> {\n  /**\n   * Name of the state. Required.\n   */\n  name: string;\n\n  /**\n   * Default values for the state. If not provided, uses empty object.\n   */\n  defaults?: T;\n\n  /**\n   * Sub states for the given state.\n   */\n  children?: any[];\n}\n\n/**\n * Actions that can be provided in a action decorator.\n */\nexport interface ActionOptions {\n  /**\n   * Cancel the previous uncompleted observable(s).\n   */\n  cancelUncompleted?: boolean;\n}\n\n/**\n * On init interface\n */\nexport interface NgxsOnInit {\n  ngxsOnInit(ctx?: StateContext<any>): void | any;\n}\n\nexport type NgxsLifeCycle = Partial<NgxsOnInit>;\n"
  ],
  "names": [],
  "mappings": "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"
}
