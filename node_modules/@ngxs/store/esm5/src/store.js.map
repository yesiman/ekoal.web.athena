{
  "version": 3,
  "file": "store.js",
  "sources": [
    "ng://@ngxs/store/packages/store/src/store.ts"
  ],
  "sourcesContent": [
    "import { Injectable, NgZone } from '@angular/core';\nimport { Observable, of, Subscription } from 'rxjs';\nimport { catchError, distinctUntilChanged, map, take } from 'rxjs/operators';\n\nimport { getSelectorFn } from './selector-utils';\nimport { InternalStateOperations } from './state-operations';\nimport { StateStream } from './state-stream';\nimport { enterZone } from './zone';\n\n@Injectable()\nexport class Store {\n  constructor(\n    private _ngZone: NgZone,\n    private _stateStream: StateStream,\n    private _internalStateOperations: InternalStateOperations\n  ) {}\n\n  /**\n   * Dispatches event(s).\n   */\n  dispatch(event: any | any[]): Observable<any> {\n    return this._internalStateOperations.getRootStateOperations().dispatch(event);\n  }\n\n  /**\n   * Selects a slice of data from the store.\n   */\n  select<T>(selector: (state: any, ...states: any[]) => T): Observable<T>;\n  select(selector: string | any): Observable<any>;\n  select(selector: any): Observable<any> {\n    const selectorFn = getSelectorFn(selector);\n    return this._stateStream.pipe(\n      map(selectorFn),\n      catchError(err => {\n        // if error is TypeError we swallow it to prevent usual errors with property access\n        if (err instanceof TypeError) {\n          return of(undefined);\n        }\n\n        // rethrow other errors\n        throw err;\n      }),\n      distinctUntilChanged(),\n      enterZone(this._ngZone)\n    );\n  }\n\n  /**\n   * Select one slice of data from the store.\n   */\n  selectOnce<T>(selector: (state: any, ...states: any[]) => T): Observable<T>;\n  selectOnce(selector: string | any): Observable<any>;\n  selectOnce(selector: any): Observable<any> {\n    return this.select(selector).pipe(take(1));\n  }\n\n  /**\n   * Select a snapshot from the state.\n   */\n  selectSnapshot<T>(selector: (state: any, ...states: any[]) => T): T;\n  selectSnapshot(selector: string | any): any;\n  selectSnapshot(selector: any): any {\n    const selectorFn = getSelectorFn(selector);\n    return selectorFn(this._stateStream.getValue());\n  }\n\n  /**\n   * Allow the user to subscribe to the root of the state\n   */\n  subscribe(fn?: any): Subscription {\n    return this._stateStream.pipe(enterZone(this._ngZone)).subscribe(fn);\n  }\n\n  /**\n   * Return the raw value of the state.\n   */\n  snapshot(): any {\n    return this._internalStateOperations.getRootStateOperations().getState();\n  }\n\n  /**\n   * Reset the state to a specific point in time. This method is useful\n   * for plugin's who need to modify the state directly or unit testing.\n   */\n  reset(state: any) {\n    return this._internalStateOperations.getRootStateOperations().setState(state);\n  }\n}\n"
  ],
  "names": [],
  "mappings": "AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AACnD,OAAO,EAAc,EAAE,EAAgB,MAAM,MAAM,CAAC;AACpD,OAAO,EAAE,UAAU,EAAE,oBAAoB,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,gBAAgB,CAAC;AAE7E,OAAO,EAAE,aAAa,EAAE,MAAM,kBAAkB,CAAC;AACjD,OAAO,EAAE,uBAAuB,EAAE,MAAM,oBAAoB,CAAC;AAC7D,OAAO,EAAE,WAAW,EAAE,MAAM,gBAAgB,CAAC;AAC7C,OAAO,EAAE,SAAS,EAAE,MAAM,QAAQ,CAAC;AAGnC,MAAM;IACJ,YACU,OAAe,EACf,YAAyB,EACzB,wBAAiD;QAFjD,YAAO,GAAP,OAAO,CAAQ;QACf,iBAAY,GAAZ,YAAY,CAAa;QACzB,6BAAwB,GAAxB,wBAAwB,CAAyB;KACvD;;;;IAKJ,QAAQ,CAAC,KAAkB;QACzB,MAAM,CAAC,IAAI,CAAC,wBAAwB,CAAC,sBAAsB,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;KAC/E;IAOD,MAAM,CAAC,QAAa;QAClB,MAAM,UAAU,GAAG,aAAa,CAAC,QAAQ,CAAC,CAAC;QAC3C,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAC3B,GAAG,CAAC,UAAU,CAAC,EACf,UAAU,CAAC,GAAG,CAAC,EAAE;;YAEf,EAAE,CAAC,CAAC,GAAG,YAAY,SAAS,CAAC,CAAC,CAAC;gBAC7B,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;aACtB;;YAGD,MAAM,GAAG,CAAC;SACX,CAAC,EACF,oBAAoB,EAAE,EACtB,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CACxB,CAAC;KACH;IAOD,UAAU,CAAC,QAAa;QACtB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;KAC5C;IAOD,cAAc,CAAC,QAAa;QAC1B,MAAM,UAAU,GAAG,aAAa,CAAC,QAAQ,CAAC,CAAC;QAC3C,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC;KACjD;;;;IAKD,SAAS,CAAC,EAAQ;QAChB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;KACtE;;;;IAKD,QAAQ;QACN,MAAM,CAAC,IAAI,CAAC,wBAAwB,CAAC,sBAAsB,EAAE,CAAC,QAAQ,EAAE,CAAC;KAC1E;;;;;IAMD,KAAK,CAAC,KAAU;QACd,MAAM,CAAC,IAAI,CAAC,wBAAwB,CAAC,sBAAsB,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;KAC/E;;;YA7EF,UAAU;;;;YATU,MAAM;YAMlB,WAAW;YADX,uBAAuB"
}
